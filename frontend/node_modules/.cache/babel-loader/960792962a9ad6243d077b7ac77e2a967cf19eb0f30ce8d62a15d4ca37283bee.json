{"ast":null,"code":"import { isMap, isArray, isPlainObject, isSet } from './is';\nimport { includes } from './util';\nvar getNthKey = function getNthKey(value, n) {\n  var keys = value.keys();\n  while (n > 0) {\n    keys.next();\n    n--;\n  }\n  return keys.next().value;\n};\nfunction validatePath(path) {\n  if (includes(path, '__proto__')) {\n    throw new Error('__proto__ is not allowed as a property');\n  }\n  if (includes(path, 'prototype')) {\n    throw new Error('prototype is not allowed as a property');\n  }\n  if (includes(path, 'constructor')) {\n    throw new Error('constructor is not allowed as a property');\n  }\n}\nexport var getDeep = function getDeep(object, path) {\n  validatePath(path);\n  for (var i = 0; i < path.length; i++) {\n    var key = path[i];\n    if (isSet(object)) {\n      object = getNthKey(object, +key);\n    } else if (isMap(object)) {\n      var row = +key;\n      var type = +path[++i] === 0 ? 'key' : 'value';\n      var keyOfRow = getNthKey(object, row);\n      switch (type) {\n        case 'key':\n          object = keyOfRow;\n          break;\n        case 'value':\n          object = object.get(keyOfRow);\n          break;\n      }\n    } else {\n      object = object[key];\n    }\n  }\n  return object;\n};\nexport var setDeep = function setDeep(object, path, mapper) {\n  validatePath(path);\n  if (path.length === 0) {\n    return mapper(object);\n  }\n  var parent = object;\n  for (var i = 0; i < path.length - 1; i++) {\n    var key = path[i];\n    if (isArray(parent)) {\n      var index = +key;\n      parent = parent[index];\n    } else if (isPlainObject(parent)) {\n      parent = parent[key];\n    } else if (isSet(parent)) {\n      var row = +key;\n      parent = getNthKey(parent, row);\n    } else if (isMap(parent)) {\n      var isEnd = i === path.length - 2;\n      if (isEnd) {\n        break;\n      }\n      var row = +key;\n      var type = +path[++i] === 0 ? 'key' : 'value';\n      var keyOfRow = getNthKey(parent, row);\n      switch (type) {\n        case 'key':\n          parent = keyOfRow;\n          break;\n        case 'value':\n          parent = parent.get(keyOfRow);\n          break;\n      }\n    }\n  }\n  var lastKey = path[path.length - 1];\n  if (isArray(parent)) {\n    parent[+lastKey] = mapper(parent[+lastKey]);\n  } else if (isPlainObject(parent)) {\n    parent[lastKey] = mapper(parent[lastKey]);\n  }\n  if (isSet(parent)) {\n    var oldValue = getNthKey(parent, +lastKey);\n    var newValue = mapper(oldValue);\n    if (oldValue !== newValue) {\n      parent[\"delete\"](oldValue);\n      parent.add(newValue);\n    }\n  }\n  if (isMap(parent)) {\n    var row = +path[path.length - 2];\n    var keyToRow = getNthKey(parent, row);\n    var type = +lastKey === 0 ? 'key' : 'value';\n    switch (type) {\n      case 'key':\n        {\n          var newKey = mapper(keyToRow);\n          parent.set(newKey, parent.get(keyToRow));\n          if (newKey !== keyToRow) {\n            parent[\"delete\"](keyToRow);\n          }\n          break;\n        }\n      case 'value':\n        {\n          parent.set(keyToRow, mapper(parent.get(keyToRow)));\n          break;\n        }\n    }\n  }\n  return object;\n};","map":{"version":3,"names":["isMap","isArray","isPlainObject","isSet","includes","getNthKey","value","n","keys","next","validatePath","path","Error","getDeep","object","i","length","key","row","type","keyOfRow","get","setDeep","mapper","parent","index","isEnd","lastKey","oldValue","newValue","add","keyToRow","newKey","set"],"sources":["C:\\Users\\parkj\\Desktop\\OSS\\Git_filemanager\\frontend\\node_modules\\superjson\\src\\accessDeep.ts"],"sourcesContent":["import { isMap, isArray, isPlainObject, isSet } from './is';\r\nimport { includes } from './util';\r\n\r\nconst getNthKey = (value: Map<any, any> | Set<any>, n: number): any => {\r\n  const keys = value.keys();\r\n  while (n > 0) {\r\n    keys.next();\r\n    n--;\r\n  }\r\n\r\n  return keys.next().value;\r\n};\r\n\r\nfunction validatePath(path: (string | number)[]) {\r\n  if (includes(path, '__proto__')) {\r\n    throw new Error('__proto__ is not allowed as a property');\r\n  }\r\n  if (includes(path, 'prototype')) {\r\n    throw new Error('prototype is not allowed as a property');\r\n  }\r\n  if (includes(path, 'constructor')) {\r\n    throw new Error('constructor is not allowed as a property');\r\n  }\r\n}\r\n\r\nexport const getDeep = (object: object, path: (string | number)[]): object => {\r\n  validatePath(path);\r\n\r\n  for (let i = 0; i < path.length; i++) {\r\n    const key = path[i];\r\n    if (isSet(object)) {\r\n      object = getNthKey(object, +key);\r\n    } else if (isMap(object)) {\r\n      const row = +key;\r\n      const type = +path[++i] === 0 ? 'key' : 'value';\r\n\r\n      const keyOfRow = getNthKey(object, row);\r\n      switch (type) {\r\n        case 'key':\r\n          object = keyOfRow;\r\n          break;\r\n        case 'value':\r\n          object = object.get(keyOfRow);\r\n          break;\r\n      }\r\n    } else {\r\n      object = (object as any)[key];\r\n    }\r\n  }\r\n\r\n  return object;\r\n};\r\n\r\nexport const setDeep = (\r\n  object: any,\r\n  path: (string | number)[],\r\n  mapper: (v: any) => any\r\n): any => {\r\n  validatePath(path);\r\n\r\n  if (path.length === 0) {\r\n    return mapper(object);\r\n  }\r\n\r\n  let parent = object;\r\n\r\n  for (let i = 0; i < path.length - 1; i++) {\r\n    const key = path[i];\r\n\r\n    if (isArray(parent)) {\r\n      const index = +key;\r\n      parent = parent[index];\r\n    } else if (isPlainObject(parent)) {\r\n      parent = parent[key];\r\n    } else if (isSet(parent)) {\r\n      const row = +key;\r\n      parent = getNthKey(parent, row);\r\n    } else if (isMap(parent)) {\r\n      const isEnd = i === path.length - 2;\r\n      if (isEnd) {\r\n        break;\r\n      }\r\n\r\n      const row = +key;\r\n      const type = +path[++i] === 0 ? 'key' : 'value';\r\n\r\n      const keyOfRow = getNthKey(parent, row);\r\n      switch (type) {\r\n        case 'key':\r\n          parent = keyOfRow;\r\n          break;\r\n        case 'value':\r\n          parent = parent.get(keyOfRow);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  const lastKey = path[path.length - 1];\r\n\r\n  if (isArray(parent)) {\r\n    parent[+lastKey] = mapper(parent[+lastKey]);\r\n  } else if (isPlainObject(parent)) {\r\n    parent[lastKey] = mapper(parent[lastKey]);\r\n  }\r\n\r\n  if (isSet(parent)) {\r\n    const oldValue = getNthKey(parent, +lastKey);\r\n    const newValue = mapper(oldValue);\r\n    if (oldValue !== newValue) {\r\n      parent.delete(oldValue);\r\n      parent.add(newValue);\r\n    }\r\n  }\r\n\r\n  if (isMap(parent)) {\r\n    const row = +path[path.length - 2];\r\n    const keyToRow = getNthKey(parent, row);\r\n\r\n    const type = +lastKey === 0 ? 'key' : 'value';\r\n    switch (type) {\r\n      case 'key': {\r\n        const newKey = mapper(keyToRow);\r\n        parent.set(newKey, parent.get(keyToRow));\r\n\r\n        if (newKey !== keyToRow) {\r\n          parent.delete(keyToRow);\r\n        }\r\n        break;\r\n      }\r\n\r\n      case 'value': {\r\n        parent.set(keyToRow, mapper(parent.get(keyToRow)));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  return object;\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}