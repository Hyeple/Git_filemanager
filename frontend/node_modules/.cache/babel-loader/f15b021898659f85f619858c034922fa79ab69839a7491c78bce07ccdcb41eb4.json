{"ast":null,"code":"import _slicedToArray from \"C:/Users/parkj/Desktop/OSS/Git_filemanager/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"C:/Users/parkj/Desktop/OSS/Git_filemanager/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/parkj/Desktop/OSS/Git_filemanager/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/parkj/Desktop/OSS/Git_filemanager/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/parkj/Desktop/OSS/Git_filemanager/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { hashQueryKeyByOptions, parseFilterArgs, matchQuery } from './utils.mjs';\nimport { Query } from './query.mjs';\nimport { notifyManager } from './notifyManager.mjs';\nimport { Subscribable } from './subscribable.mjs';\n\n// CLASS\nvar QueryCache = /*#__PURE__*/function (_Subscribable) {\n  _inherits(QueryCache, _Subscribable);\n  var _super = _createSuper(QueryCache);\n  function QueryCache(config) {\n    var _this;\n    _classCallCheck(this, QueryCache);\n    _this = _super.call(this);\n    _this.config = config || {};\n    _this.queries = [];\n    _this.queriesMap = {};\n    return _this;\n  }\n  _createClass(QueryCache, [{\n    key: \"build\",\n    value: function build(client, options, state) {\n      var _options$queryHash;\n      var queryKey = options.queryKey;\n      var queryHash = (_options$queryHash = options.queryHash) != null ? _options$queryHash : hashQueryKeyByOptions(queryKey, options);\n      var query = this.get(queryHash);\n      if (!query) {\n        query = new Query({\n          cache: this,\n          logger: client.getLogger(),\n          queryKey: queryKey,\n          queryHash: queryHash,\n          options: client.defaultQueryOptions(options),\n          state: state,\n          defaultOptions: client.getQueryDefaults(queryKey)\n        });\n        this.add(query);\n      }\n      return query;\n    }\n  }, {\n    key: \"add\",\n    value: function add(query) {\n      if (!this.queriesMap[query.queryHash]) {\n        this.queriesMap[query.queryHash] = query;\n        this.queries.push(query);\n        this.notify({\n          type: 'added',\n          query: query\n        });\n      }\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(query) {\n      var queryInMap = this.queriesMap[query.queryHash];\n      if (queryInMap) {\n        query.destroy();\n        this.queries = this.queries.filter(function (x) {\n          return x !== query;\n        });\n        if (queryInMap === query) {\n          delete this.queriesMap[query.queryHash];\n        }\n        this.notify({\n          type: 'removed',\n          query: query\n        });\n      }\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _this2 = this;\n      notifyManager.batch(function () {\n        _this2.queries.forEach(function (query) {\n          _this2.remove(query);\n        });\n      });\n    }\n  }, {\n    key: \"get\",\n    value: function get(queryHash) {\n      return this.queriesMap[queryHash];\n    }\n  }, {\n    key: \"getAll\",\n    value: function getAll() {\n      return this.queries;\n    }\n  }, {\n    key: \"find\",\n    value: function find(arg1, arg2) {\n      var _parseFilterArgs = parseFilterArgs(arg1, arg2),\n        _parseFilterArgs2 = _slicedToArray(_parseFilterArgs, 1),\n        filters = _parseFilterArgs2[0];\n      if (typeof filters.exact === 'undefined') {\n        filters.exact = true;\n      }\n      return this.queries.find(function (query) {\n        return matchQuery(filters, query);\n      });\n    }\n  }, {\n    key: \"findAll\",\n    value: function findAll(arg1, arg2) {\n      var _parseFilterArgs3 = parseFilterArgs(arg1, arg2),\n        _parseFilterArgs4 = _slicedToArray(_parseFilterArgs3, 1),\n        filters = _parseFilterArgs4[0];\n      return Object.keys(filters).length > 0 ? this.queries.filter(function (query) {\n        return matchQuery(filters, query);\n      }) : this.queries;\n    }\n  }, {\n    key: \"notify\",\n    value: function notify(event) {\n      var _this3 = this;\n      notifyManager.batch(function () {\n        _this3.listeners.forEach(function (listener) {\n          listener(event);\n        });\n      });\n    }\n  }, {\n    key: \"onFocus\",\n    value: function onFocus() {\n      var _this4 = this;\n      notifyManager.batch(function () {\n        _this4.queries.forEach(function (query) {\n          query.onFocus();\n        });\n      });\n    }\n  }, {\n    key: \"onOnline\",\n    value: function onOnline() {\n      var _this5 = this;\n      notifyManager.batch(function () {\n        _this5.queries.forEach(function (query) {\n          query.onOnline();\n        });\n      });\n    }\n  }]);\n  return QueryCache;\n}(Subscribable);\nexport { QueryCache };","map":{"version":3,"names":["QueryCache","_Subscribable","_inherits","_super","_createSuper","config","_this","_classCallCheck","call","queries","queriesMap","_createClass","key","value","build","client","options","state","_options$queryHash","queryKey","queryHash","hashQueryKeyByOptions","query","get","Query","cache","logger","getLogger","defaultQueryOptions","defaultOptions","getQueryDefaults","add","push","notify","type","remove","queryInMap","destroy","filter","x","clear","_this2","notifyManager","batch","forEach","getAll","find","arg1","arg2","_parseFilterArgs","parseFilterArgs","_parseFilterArgs2","_slicedToArray","filters","exact","matchQuery","findAll","_parseFilterArgs3","_parseFilterArgs4","Object","keys","length","event","_this3","listeners","listener","onFocus","_this4","onOnline","_this5","Subscribable"],"sources":["C:\\Users\\parkj\\Desktop\\OSS\\Git_filemanager\\frontend\\node_modules\\@tanstack\\query-core\\src\\queryCache.ts"],"sourcesContent":["import type { QueryFilters } from './utils'\nimport { hashQueryKeyByOptions, matchQuery, parseFilterArgs } from './utils'\nimport type { Action, QueryState } from './query'\nimport { Query } from './query'\nimport type { NotifyEvent, QueryKey, QueryOptions } from './types'\nimport { notifyManager } from './notifyManager'\nimport type { QueryClient } from './queryClient'\nimport { Subscribable } from './subscribable'\nimport type { QueryObserver } from './queryObserver'\n\n// TYPES\n\ninterface QueryCacheConfig {\n  onError?: (error: unknown, query: Query<unknown, unknown, unknown>) => void\n  onSuccess?: (data: unknown, query: Query<unknown, unknown, unknown>) => void\n  onSettled?: (\n    data: unknown | undefined,\n    error: unknown | null,\n    query: Query<unknown, unknown, unknown>,\n  ) => void\n}\n\ninterface QueryHashMap {\n  [hash: string]: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryAdded extends NotifyEvent {\n  type: 'added'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryRemoved extends NotifyEvent {\n  type: 'removed'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryUpdated extends NotifyEvent {\n  type: 'updated'\n  query: Query<any, any, any, any>\n  action: Action<any, any>\n}\n\ninterface NotifyEventQueryObserverAdded extends NotifyEvent {\n  type: 'observerAdded'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverRemoved extends NotifyEvent {\n  type: 'observerRemoved'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverResultsUpdated extends NotifyEvent {\n  type: 'observerResultsUpdated'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverOptionsUpdated extends NotifyEvent {\n  type: 'observerOptionsUpdated'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\ntype QueryCacheNotifyEvent =\n  | NotifyEventQueryAdded\n  | NotifyEventQueryRemoved\n  | NotifyEventQueryUpdated\n  | NotifyEventQueryObserverAdded\n  | NotifyEventQueryObserverRemoved\n  | NotifyEventQueryObserverResultsUpdated\n  | NotifyEventQueryObserverOptionsUpdated\n\ntype QueryCacheListener = (event: QueryCacheNotifyEvent) => void\n\n// CLASS\n\nexport class QueryCache extends Subscribable<QueryCacheListener> {\n  config: QueryCacheConfig\n\n  private queries: Query<any, any, any, any>[]\n  private queriesMap: QueryHashMap\n\n  constructor(config?: QueryCacheConfig) {\n    super()\n    this.config = config || {}\n    this.queries = []\n    this.queriesMap = {}\n  }\n\n  build<TQueryFnData, TError, TData, TQueryKey extends QueryKey>(\n    client: QueryClient,\n    options: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n    state?: QueryState<TData, TError>,\n  ): Query<TQueryFnData, TError, TData, TQueryKey> {\n    const queryKey = options.queryKey!\n    const queryHash =\n      options.queryHash ?? hashQueryKeyByOptions(queryKey, options)\n    let query = this.get<TQueryFnData, TError, TData, TQueryKey>(queryHash)\n\n    if (!query) {\n      query = new Query({\n        cache: this,\n        logger: client.getLogger(),\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey),\n      })\n      this.add(query)\n    }\n\n    return query\n  }\n\n  add(query: Query<any, any, any, any>): void {\n    if (!this.queriesMap[query.queryHash]) {\n      this.queriesMap[query.queryHash] = query\n      this.queries.push(query)\n      this.notify({\n        type: 'added',\n        query,\n      })\n    }\n  }\n\n  remove(query: Query<any, any, any, any>): void {\n    const queryInMap = this.queriesMap[query.queryHash]\n\n    if (queryInMap) {\n      query.destroy()\n\n      this.queries = this.queries.filter((x) => x !== query)\n\n      if (queryInMap === query) {\n        delete this.queriesMap[query.queryHash]\n      }\n\n      this.notify({ type: 'removed', query })\n    }\n  }\n\n  clear(): void {\n    notifyManager.batch(() => {\n      this.queries.forEach((query) => {\n        this.remove(query)\n      })\n    })\n  }\n\n  get<\n    TQueryFnData = unknown,\n    TError = unknown,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    queryHash: string,\n  ): Query<TQueryFnData, TError, TData, TQueryKey> | undefined {\n    return this.queriesMap[queryHash]\n  }\n\n  getAll(): Query[] {\n    return this.queries\n  }\n\n  find<TQueryFnData = unknown, TError = unknown, TData = TQueryFnData>(\n    arg1: QueryKey,\n    arg2?: QueryFilters,\n  ): Query<TQueryFnData, TError, TData> | undefined {\n    const [filters] = parseFilterArgs(arg1, arg2)\n\n    if (typeof filters.exact === 'undefined') {\n      filters.exact = true\n    }\n\n    return this.queries.find((query) => matchQuery(filters, query))\n  }\n\n  findAll(queryKey?: QueryKey, filters?: QueryFilters): Query[]\n  findAll(filters?: QueryFilters): Query[]\n  findAll(arg1?: QueryKey | QueryFilters, arg2?: QueryFilters): Query[]\n  findAll(arg1?: QueryKey | QueryFilters, arg2?: QueryFilters): Query[] {\n    const [filters] = parseFilterArgs(arg1, arg2)\n    return Object.keys(filters).length > 0\n      ? this.queries.filter((query) => matchQuery(filters, query))\n      : this.queries\n  }\n\n  notify(event: QueryCacheNotifyEvent) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event)\n      })\n    })\n  }\n\n  onFocus(): void {\n    notifyManager.batch(() => {\n      this.queries.forEach((query) => {\n        query.onFocus()\n      })\n    })\n  }\n\n  onOnline(): void {\n    notifyManager.batch(() => {\n      this.queries.forEach((query) => {\n        query.onOnline()\n      })\n    })\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}