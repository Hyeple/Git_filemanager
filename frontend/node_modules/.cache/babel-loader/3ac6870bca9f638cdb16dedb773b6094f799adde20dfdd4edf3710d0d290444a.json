{"ast":null,"code":"import _slicedToArray from \"C:/Users/parkj/Desktop/OSS/Git_filemanager/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport useState from \"rc-util/es/hooks/useState\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\nfunction isThenable(thing) {\n  return !!(thing && thing.then);\n}\nvar ActionButton = function ActionButton(props) {\n  var type = props.type,\n    children = props.children,\n    prefixCls = props.prefixCls,\n    buttonProps = props.buttonProps,\n    close = props.close,\n    autoFocus = props.autoFocus,\n    emitEvent = props.emitEvent,\n    quitOnNullishReturnValue = props.quitOnNullishReturnValue,\n    actionFn = props.actionFn;\n  var clickedRef = React.useRef(false);\n  var buttonRef = React.useRef(null);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var onInternalClose = function onInternalClose() {\n    close === null || close === void 0 ? void 0 : close.apply(void 0, arguments);\n  };\n  React.useEffect(function () {\n    var timeoutId = null;\n    if (autoFocus) {\n      timeoutId = setTimeout(function () {\n        var _a;\n        (_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      });\n    }\n    return function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n  var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      setLoading(false, true);\n      onInternalClose.apply(void 0, arguments);\n      clickedRef.current = false;\n    }, function (e) {\n      // See: https://github.com/ant-design/ant-design/issues/6183\n      setLoading(false, true);\n      clickedRef.current = false;\n      return Promise.reject(e);\n    });\n  };\n  var onClick = function onClick(e) {\n    if (clickedRef.current) {\n      return;\n    }\n    clickedRef.current = true;\n    if (!actionFn) {\n      onInternalClose();\n      return;\n    }\n    var returnValueOfOnOk;\n    if (emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n      if (quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        onInternalClose(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close);\n      // https://github.com/ant-design/ant-design/issues/23358\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n      if (!returnValueOfOnOk) {\n        onInternalClose();\n        return;\n      }\n    }\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n  return /*#__PURE__*/React.createElement(Button, Object.assign({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: buttonRef\n  }), children);\n};\nexport default ActionButton;","map":{"version":3,"names":["useState","React","Button","convertLegacyProps","isThenable","thing","then","ActionButton","props","type","children","prefixCls","buttonProps","close","autoFocus","emitEvent","quitOnNullishReturnValue","actionFn","clickedRef","useRef","buttonRef","_useState","_useState2","_slicedToArray","loading","setLoading","onInternalClose","apply","arguments","useEffect","timeoutId","setTimeout","_a","current","focus","clearTimeout","handlePromiseOnOk","returnValueOfOnOk","e","Promise","reject","onClick","length","createElement","Object","assign","ref"],"sources":["C:/Users/parkj/Desktop/OSS/Git_filemanager/frontend/node_modules/antd/es/_util/ActionButton.js"],"sourcesContent":["import useState from \"rc-util/es/hooks/useState\";\r\nimport * as React from 'react';\r\nimport Button from '../button';\r\nimport { convertLegacyProps } from '../button/button';\r\nfunction isThenable(thing) {\r\n  return !!(thing && thing.then);\r\n}\r\nconst ActionButton = props => {\r\n  const {\r\n    type,\r\n    children,\r\n    prefixCls,\r\n    buttonProps,\r\n    close,\r\n    autoFocus,\r\n    emitEvent,\r\n    quitOnNullishReturnValue,\r\n    actionFn\r\n  } = props;\r\n  const clickedRef = React.useRef(false);\r\n  const buttonRef = React.useRef(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const onInternalClose = function () {\r\n    close === null || close === void 0 ? void 0 : close.apply(void 0, arguments);\r\n  };\r\n  React.useEffect(() => {\r\n    let timeoutId = null;\r\n    if (autoFocus) {\r\n      timeoutId = setTimeout(() => {\r\n        var _a;\r\n        (_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.focus();\r\n      });\r\n    }\r\n    return () => {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n      }\r\n    };\r\n  }, []);\r\n  const handlePromiseOnOk = returnValueOfOnOk => {\r\n    if (!isThenable(returnValueOfOnOk)) {\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    returnValueOfOnOk.then(function () {\r\n      setLoading(false, true);\r\n      onInternalClose.apply(void 0, arguments);\r\n      clickedRef.current = false;\r\n    }, e => {\r\n      // See: https://github.com/ant-design/ant-design/issues/6183\r\n      setLoading(false, true);\r\n      clickedRef.current = false;\r\n      return Promise.reject(e);\r\n    });\r\n  };\r\n  const onClick = e => {\r\n    if (clickedRef.current) {\r\n      return;\r\n    }\r\n    clickedRef.current = true;\r\n    if (!actionFn) {\r\n      onInternalClose();\r\n      return;\r\n    }\r\n    let returnValueOfOnOk;\r\n    if (emitEvent) {\r\n      returnValueOfOnOk = actionFn(e);\r\n      if (quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\r\n        clickedRef.current = false;\r\n        onInternalClose(e);\r\n        return;\r\n      }\r\n    } else if (actionFn.length) {\r\n      returnValueOfOnOk = actionFn(close);\r\n      // https://github.com/ant-design/ant-design/issues/23358\r\n      clickedRef.current = false;\r\n    } else {\r\n      returnValueOfOnOk = actionFn();\r\n      if (!returnValueOfOnOk) {\r\n        onInternalClose();\r\n        return;\r\n      }\r\n    }\r\n    handlePromiseOnOk(returnValueOfOnOk);\r\n  };\r\n  return /*#__PURE__*/React.createElement(Button, Object.assign({}, convertLegacyProps(type), {\r\n    onClick: onClick,\r\n    loading: loading,\r\n    prefixCls: prefixCls\r\n  }, buttonProps, {\r\n    ref: buttonRef\r\n  }), children);\r\n};\r\nexport default ActionButton;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}